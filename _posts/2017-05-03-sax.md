---
layout: post
title: Parsing XML via SAX in Python
---

I've worked with XML before (in Java), but always small files using the [Document Object Model](https://en.wikipedia.org/wiki/Document_Object_Model).  Now faced with multi-GB of Open Street Map derived XML files, of which I need to get a small amount of data, some other method is required.  Step forward the [Simple API for XML (SAX)](https://en.wikipedia.org/wiki/Simple_API_for_XML).  This is an [event-driven API](http://www.saxproject.org/event.html): the XML parser calls a "handler" object with information about tags opening and closing, and the character data in between.

In Python, there is support in the [standard library](https://docs.python.org/3/library/xml.sax.html) for SAX parsing.  You need to sub-class (or duck-type, and implement the interface of) `xml.sax.handler.ContentHandler`.  It seems that duck-typing is frustrating, as you need to implement the whole interface, even if you never expect certain methods to be called.

The methods `startDocument` and `endDocument` are called at the start and end of parsing.  The `startElement` method sends details of the name of an opening tag, and it's attributes (sent as essentially, but not quite the same as, a `dict` from string to string), and `endElement` tells you of a closing tag.  Text is sent to you via `characters` which will also notify of new lines (which probably want ignoring).  There is more, but that's enough for my application.

